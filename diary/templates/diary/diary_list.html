{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>éŸ³å£°æ—¥è¨˜ä¸€è¦§</title>
<style>
  body {
    font-family: 'Helvetica Neue', sans-serif;
    background-color: #fffaf7;
    margin: 0;
    padding: 0;
  }

  /* ğŸ€ ãƒ”ãƒ³ã‚¯ã®ãƒ˜ãƒƒãƒ€ãƒ¼ */
  header {
    background-color: #ffd6e7;
    color: #6a4a32;
    padding: 16px 0;
    text-align: center;
    font-size: 22px;
    font-weight: bold;
    position: relative;
  }

  /* ğŸ‘¤ å³ä¸Šãƒ¦ãƒ¼ã‚¶ãƒ¼å */
  .username-title {
    position: absolute;
    top: 14px;
    right: 16px;
    font-size: 20px;
    font-weight: bold;
    color: #ff91a4;
    text-shadow: 1px 1px #ffe6ea;
    letter-spacing: 1px;
  }

  /* ğŸ  ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ */
  .home-btn {
    position: absolute;
    top: 12px;
    left: 12px;
    z-index: 1000;
  }

  .home-btn img {
    width: 130px;
    height: auto;
    cursor: pointer;
    transition: transform 0.2s ease;
  }

  .home-btn img:hover {
    transform: scale(1.05);
  }

  /* ğŸ“˜ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å…¨ä½“ */
  .container {
    max-width: 900px;
    margin: 120px auto;
    padding: 20px;
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 4px 8px rgba(255, 150, 150, 0.2);
  }

  /* ã‚«ãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
  .diary-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
  }

  .diary-card {
    width: 250px;
    padding: 15px;
    border-radius: 15px;
    box-shadow: 0 2px 6px rgba(255, 150, 150, 0.3);
    text-align: center;
  }

  .diary-card img {
    width: 100%;
    border-radius: 10px;
  }

  .diary-meta {
    font-size: 14px;
    color: #555;
    margin-bottom: 10px;
  }

  audio {
    width: 100%;
    margin: 10px 0;
  }

  /* ä¸¦ã³é †ã¨çµã‚Šè¾¼ã¿ */
  .controls {
    text-align: center;
    margin-bottom: 20px;
  }

  .controls a {
    margin-right: 10px;
    padding: 8px 16px;
    background-color: #ff91a4;
    color: white;
    border-radius: 8px;
    text-decoration: none;
  }

  .controls select {
    padding: 5px;
    border-radius: 8px;
    border: 1.5px solid #ffc0cb;
  }

  /* âœï¸ æ–°ã—ãè¨˜éŒ²ã™ã‚‹ãƒœã‚¿ãƒ³ */
  .new-record-btn {
    text-align: center;
    margin: 20px 0 30px 0;
  }

  .new-record-btn img {
    width: 220px;
    height: auto;
    cursor: pointer;
    transition: transform 0.2s ease;
  }

  .new-record-btn img:hover {
    transform: scale(1.05);
  }

</style>
</head>
<body>

  <!-- ğŸ  ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ -->
  <div class="home-btn">
    <a href="{% url 'diary:mypage' %}">
      <img src="{% static 'images/home_button.png' %}" alt="ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹">
    </a>
  </div>

  <!-- ğŸ€ ãƒ”ãƒ³ã‚¯ã®ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header>
    ğŸ“” éŸ³å£°æ—¥è¨˜ä¸€è¦§ ğŸ¼
    <div class="username-title">
      {{ profile.username|default:"ã‚²ã‚¹ãƒˆ" }} Diary
    </div>
  </header>

  <!-- ğŸ“¦ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <div class="container">

    <!-- âœï¸ æ–°ã—ãè¨˜éŒ²ã™ã‚‹ãƒœã‚¿ãƒ³ -->
    <div class="new-record-btn">
      <a href="{% url 'diary:diary_create' %}">
        <img src="{% static 'images/æ–°ã—ãè¨˜éŒ²ã™ã‚‹.png' %}" alt="æ–°ã—ã„æ—¥è¨˜ã‚’ä½œã‚‹">
      </a>
    </div>

    <!-- ä¸¦ã³é †ãƒ»çµã‚Šè¾¼ã¿ -->
    <div class="controls">
      <a href="?order=new">æ–°ç€é †</a>
      <a href="?order=old">å¤ã„é †</a>

      <form method="get" style="display:inline-block; margin-left: 15px;">
        <label for="mood">æ°—åˆ†:</label>
        <select name="mood" id="mood" onchange="this.form.submit()">
          <option value="">ã™ã¹ã¦</option>
          {% for key, label in diary_model.MOOD_CHOICES %}
              <option value="{{ key }}" {% if mood_filter == key %}selected{% endif %}>
                  {{ label }}
              </option>
          {% endfor %}
        </select>
      </form>
    </div>

    <!-- ä¸€è¦§ã‚«ãƒ¼ãƒ‰ -->
    <div class="diary-container">
      {% for diary in diaries %}
          <div class="diary-card" style="background-color: {{ diary.color }};">
              <h3>{{ diary.title }}</h3>
              <div class="diary-meta">
                  <span>{{ diary.created_at|date:"Y/m/d" }}</span><br>
                  <span>{{ diary.mood }}</span> {{ diary.emoji }}
              </div>
              {% if diary.audio_file %}
                  <audio controls>
                      <source src="{{ diary.audio_file.url }}" type="audio/mpeg">
                      ãƒ–ãƒ©ã‚¦ã‚¶ãŒaudioã‚¿ã‚°ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚
                  </audio>
              {% endif %}
              <p>{{ diary.text_entry|truncatechars:60 }}</p>
              {% if diary.image %}
                  <img src="{{ diary.image.url }}" alt="å†™çœŸ">
              {% endif %}
              <a href="{% url 'diary:diary_detail' diary.pk %}">ğŸ“– ç¶šãã‚’èª­ã‚€</a>
          </div>
      {% empty %}
          <p>ã¾ã æ—¥è¨˜ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
      {% endfor %}
    </div>

  </div>

</body>
</html>








